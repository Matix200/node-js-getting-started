<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Video Post – Video Sharing HTML Template</title>
        <meta name="keywords" content="Blog website templates" />
        <meta name="description" content="Author - Personal Blog Wordpress Template">
        <meta name="author" content="Rabie Elkheir">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap Core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <!-- Owl Carousel Assets -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"  type="text/css" />
		<link rel="stylesheet" href="css/cryptocss.css" type="text/css"/>
        <script type="text/javascript" src="js/parse.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" type="text/css"/>
		<script src="https://cdn.temasys.io/adapterjs/0.15.x/adapter.screenshare.min.js"></script>
		<script src="https://cdn.temasys.com.sg/adapterjs/0.11.x/adapter.debug.js"></script>
		
		<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.css" rel="stylesheet">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.js"></script>
        <!--Google Fonts-->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800|Raleway:400,500,700|Roboto:300,400,500,700,900|Ubuntu:300,300i,400,400i,500,500i,700" rel="stylesheet">
        <!-- Main CSS -->
        <link rel="stylesheet" href="css/style.css"  />
		
        <!-- Responsive CSS -->
        <link rel="stylesheet" href="css/responsive.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>
   
        <div id="AllImages"></div>
<script type="text/javascript">
Parse.initialize("cryptonsignals", "sjkfbkbagrheilhjfgakebgafevdgkjaflsvdgkjav");
Parse.serverURL = 'https://cryptonsignals.herokuapp.com/parse';
var MarketBTCArray = ['VTC', 'DOGE','PPC','LTC','FTC', 'RDD', 'NXT','DASH', 'POT','BLK','XMY','AUR','EFL','GLD','SLR','PTC','GRS','NLG','RBY','XVC','MONA','THC','ENRG','ERC','VRC','CURE','XMR','CLOAK','START','KORE','XDN','TRUST','NAV','XST','VIA','PINK', 'IOC', 'CANN','SYS','NEOS','DGB','BURST','EXCL','SWIFT','DOPE','BLOCK','ABY','BYC','XMG','BLITZ','BAY','FAIR','SPR','VTR','XRP','EMC2','COVAL','NXS','XCP','BITB','GEO','FLDC','GRC','FLO','NBT','GAME','MUE','XEM','CLAM','DMD','GAM','SPHR','OK','SNRG','PKB','CPC','AEON','ETH','GCR','TX','BCY','EXP','INFX','OMNI','AMP','AGRS','XLM','CLUB','VOX','EMC','FCT','MAID','EGC','SLS','RADS','DCR','BSD','XVG','PIVX','XVC','MEME','STEEM','2GIFE','ELSK','PDC','BRK','WAVES','RISE','LBC','SBD','BRX','ETC','STRAT','UMB','SYNX','EBST','VRM','SEQ','REP','SHIFT','ARDR','XZC','NEO','ZEC','ZCL','IOP','GOLOS','UBQ','KMD','GBG','SIB','ION','LMC','QWARK','CRW','SWT','MLN','ARK','DYN','TKS','MUSIC','DTB','INCNT','GBYTE','GNT','NXC','EDG','LGD','TRST','WINGS','RLC','GNO','GUP','LUN','HMQ','ANT','SC','BAT','ZEN','1ST','QRL','CRB','PTOY','CFI','BNT','NMR','SNT','DCT','XEL','NCO','ADT','FUN','PAY','STORJ','ADX','OMG','CVC','PART','QTUM','BCH','DNT','ADA','MANA','SALT','TIX','RCN','VIB','MER','POWR','BTG','ENG','UKG','IGNIS'];
var MarketETHArrayBN = ['ADA','ADX','AE','AION','AMB','APPC','ARK','ARN','AST','BAT','BCC','BCD','BCPT','BLZ','BNB','BNT','BRD','BTG','BTS','CDT','CHAT','CMT','CND','CTR','DASH','DGD','DLT','DNT','EDO','ELF','ENG','ENJ','EOS','ETC','EVX','FUEL','FUN','GTO','GVT','GXS','HCR','ICN','ICX','INS','IOST','IOTA','KMD','KNC','LEND','LINK','LRC','LSK','LTC','LUN','MANA','MCO','MDA','MOD','MTH','MTL','NANO','NAV','NEBL','NEO','NULS','OAX','OMG','OST','PIVX','POE','POWR','PPT','QSP','QTUM','RCN','RDN','REQ','RLC','RPX','SALT','SMGLS','SNM','SNT','STEEM','STORJ','STRAT','SUB','TNB','TRIG','TRX','VEN','VIA','VIB','VIBE','WABI','WAVES','WINX','WTC','XLM','XMR','XRP','XVG','XZC','YOYO','ZEC','ZRX'];
var MarketBNBArrayBN =['ADX','AE','AION','AMB','APPC','BAT','BCC','BCPT','BLZ','BRD','CMT','CND','DLT','GTO','ICX','IOTA','LSK','LTC','MCO','NANO','NAV','NEBL','NEO','NULS','OST','PIVX','POWR','QSP','SCN','RDN','RLC','XRP','STEEM','TRIG','VEN','VIA','WABI','WAVES','WTC','XLM','XZC','YOYO'];
var MarketBittrexUSDTArray = ['BTC','LTC','XRP','ETH','ETC','NEO','ADA','BCC','XVG','OMG','BTG','XMR','ZEC','DASH','NXT'];
var MarketBittrexETHArray = ['ETC','GNT','REP','WINGS','GUP','RLC','LUN','GNO','HMQ','TRST','ANT','BAT','1ST','QRL','CRB','RGD','PTOY','CFI','PNT','NMR','LTC','XRP','SNT','MCO','ADT','PAY','STORJ','ADX','DASH','SC','ZEC','OMG','CVC','QTUM','XMR','XEM','XLM','NEO','BCC','DNT','WAVES','STRAT','DGB','FCT','MANA','SALT','TIX','RCN','VIB','POWR','BTG','ADA','ENG','UKG','SRN','WAX'];



// Binance
var MarketETHArrayBinance = [];
var MarketETHArray = [];



function ALL(){
for(var a in MarketBittrexETHArray){
AddCoinBittrex(MarketBittrexETHArray[a]);
}
}

function Add(){
for(var a in MarketBNBArrayBN){
AddCoinBinance(MarketBNBArrayBN[a]);
}
}

function AddCoinBittrex(id){
var pair = 'ETH';
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query = new Parse.Query(CryptoCurrency);
	Query.equalTo("Symbol", id);
Query.first({
 success: function(objectx) {
	var CoinName = objectx.get("CoinName");
	var idC = objectx.id;
	var Bittrex = Parse.Object.extend("Bittrex");
	var Bittrex = new Bittrex();
    Bittrex.set("CoinName", CoinName);
	Bittrex.set("Symbol", id);
	Bittrex.set("Chart", "BITTREX:"+id+pair);
	Bittrex.set("CryptoCurrency", CryptoCurrency.createWithoutData(idC));
	Bittrex.set("Market", pair);
	Bittrex.save();
	console.log(id+": Git");
	 },
  error: function(error) {
    console.log("Error: "+error.message);
  }
});
}


function AddCoinBinance(id){
var pair = 'BNB';
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query = new Parse.Query(CryptoCurrency);
	Query.equalTo("Symbol", id);
Query.first({
 success: function(objectx) {
	var CoinName = objectx.get("CoinName");
	var idC = objectx.id;
	var Binance = Parse.Object.extend("Binance");
	var Binance = new Binance();
    Binance.set("CoinName", CoinName);
	Binance.set("Symbol", id);
	Binance.set("Chart", "BINANCE:"+id+pair);
	Binance.set("CryptoCurrency", CryptoCurrency.createWithoutData(idC));
	Binance.set("Market", pair);
	Binance.save();
	console.log(id+": Git");
	 },
  error: function(error) {
    console.log("Error: "+error.message);
  }
});
}



//ALL();



function getSupply(){
var url =  "https://api.coinmarketcap.com/v1/ticker/?start=277&limit=30";
$.ajax({
    url: url,
    type: "GET",     
    dataType : 'json', //ustawiamy typ danych na json
    success : function(json) {      
var Prices = json;
for(var c in Prices){
var id = Prices[c].id;
var suply = Prices[c].available_supply;
getCrypto(id, suply);
}
							      
    },
    complete: function() {
        $("#loading").hide();
    },
    error: function() {
        console.log( "Wystąpił błąd w połączeniu :(");
    }
});

}


function getCrypto(id, suply) {
    var Query = new Parse.Query("CryptoCurrency");
	Query.equalTo("IMGfile", id);
	Query.first({	
	success: function(object) {
     object.set("CirculatingSupply", suply);
     object.save();
	 console.log("Git");
	 },
  error: function(error) {
    console.log("Error: "+error.message);
  }
});
}


var countC = 1;
var AllParseCalendar_VALUE = [];
var ALL_COINS_PARSE_JSON = [];
function getAllCoinsValueFromParse(){
var AllCoinsFromParseCalendar = [];    
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
Query_CryptoCurrency.exists("IDCoin");
Query_CryptoCurrency.limit(2000);
Query_CryptoCurrency.find().then(function(objCoin){
    console.log(objCoin);
    for(var i in objCoin){

var idname = objCoin[i].get("IDCoin");
var idcmc = objCoin[i].get("IDCMC");
var symbol = objCoin[i].get("Symbol");

ALL_COINS_PARSE_JSON.push({
        "idName": idname,
        "idcmc": idcmc,
        "symbol": symbol
      })

AllCoinsFromParseCalendar.push(idname);
}
AllParseCalendar_VALUE = AllCoinsFromParseCalendar;
console.log(AllParseCalendar_VALUE);
getCalendar(countC);
 });

}





getAllCoinsValueFromParse();

var AllINFOCalendar = [];
function getCalendar(x){  
AllINFOCalendar = [];
var url =  "https://api.coinmarketcal.com/v1/events?access_token=ZTkzNDE1MWUwMWJjNWUwZTI0ZDg2MTU4MDQ3YzgwZmJlMmNiNjRlMmE4MTU1NWU4N2M5N2I1YTllNzcwYzYyOA&page="+x+"&max=50";
$.ajax({
    url: url,
    type: "GET",     
    dataType : 'json', //ustawiamy typ danych na json
    success : function(json) {      
var Events = json;
console.log(json);
for(var i in Events){
var EVENT_COINS = [];
var id = Events[i].id;
var title = Events[i].title;
var coins = Events[i].coins;
var date_event = Events[i].date_event;
var created_date = Events[i].created_date;
var description = Events[i].description;
var source = Events[i].source;
var is_hot = Events[i].is_hot;

for(var c in coins){
var coinsID = coins[c].id;

if(AllParseCalendar_VALUE.indexOf(coinsID) > -1){
var All_JSON = iscoinExistsCalendar(coinsID);
console.log(All_JSON);
var IMG = All_JSON[0].idcmc;
var Symbol = All_JSON[0].symbol;


EVENT_COINS.push({
        "idName": coinsID,
        "IMG": IMG,
        "Symbol": Symbol
      })


}else{}


}
     AllINFOCalendar.push({
        "id": id,
        "title": title,
        "coins"      : EVENT_COINS,
        "date_event"     : date_event,
        "created_date" : created_date,
        "description" : description,
        "source" : source,
        "is_hot" : is_hot
      })


}

console.log(AllINFOCalendar);


GetEvents(0);

                                  
    },
    complete: function() {
        $("#loading").hide();
    },
    error: function() {
        console.log( "Wystąpił błąd w połączeniu :(");
    }
});
}



function GetEvents(count){
    if(count > 49){
        getCalendar(countC++);
    }else{
    setTimeout(function(){  
    var id = AllINFOCalendar[count].id;
    var coins = AllINFOCalendar[count].coins;

    if(coins.length > 0){
    console.log(id);      
var Calendar = Parse.Object.extend("Calendar");
var Query_Calendar = new Parse.Query(Calendar);
    Query_Calendar.equalTo("IdCoinmarketcal", id.toString());
Query_Calendar.first().then(function(obj){
if(obj == null) { 
   console.log(AllINFOCalendar[count]); 


saveCalendar(AllINFOCalendar[count].id, AllINFOCalendar[count].title,  AllINFOCalendar[count].coins,  AllINFOCalendar[count].date_event, AllINFOCalendar[count].created_date, AllINFOCalendar[count].description, AllINFOCalendar[count].source, AllINFOCalendar[count].is_hot, count);


}else{
GetEvents(count+1);
console.log("Pominieto: "+AllINFOCalendar[count].id+" Strona: "+countC+" pozycja: "+count);
}

});
}else{

    console.log("Pominieto coina");
        GetEvents(count+1);
}
},200);
}
}


function saveCalendar(id, Title, AllCOINS,  eDate, cDate, Content, Source,  isHot, x){
  //  console.log(id, Title, AllCOINS, eDate, cDate, Content, Source,  isHot, x);
  //  var eD = eDate.split("T");
   // var cD = cDate.split("T");
  //  var event_date = eD[0].split("-");
   // var created_date = cD[0].split("-");
    var e = new Date(eDate);
    var c = new Date(cDate);
    e.setDate(e.getDate() + 1);
    c.setDate(c.getDate() + 1);

setTimeout(function(){  
var Calendar = Parse.Object.extend("Calendar");
Calendar  = new Calendar();
Calendar.set("IdCoinmarketcal", id.toString());
Calendar.set("Title", Title);
Calendar.set("AllCOINS", AllCOINS);
Calendar.set("eDate", e);
Calendar.set("cDate", c);
Calendar.set("Content", Content);
Calendar.set("Source", Source);
Calendar.set("isHot", isHot);
Calendar.set("CountLikes", 0);
Calendar.save({
    success: function(obj) {
console.log("Dodano: "+id.toString()+" Strona: "+countC+" pozycja: "+x);
GetEvents(x+1);
    },
    error: function(obj, error) {
      console.log(error);
    }
});
},200);
}


function iscoinExistsCalendar(code) {
var json = JSON.parse(JSON.stringify(ALL_COINS_PARSE_JSON));
  return json.filter(
    function(json) {
      return json.idName == code 
    }
  );
}




var AllCMC_VALUE = [];
var AllParse_VALUE = [];
var lenghtValue;
var startvalue = 1347;



//getAllCoinsValueFromCMC();

function getAllCoinsValueFromCMC(){

var AllCoinsFromParse = [];    
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
Query_CryptoCurrency.exists("IMGfile");
Query_CryptoCurrency.limit(2000);
Query_CryptoCurrency.find().then(function(objCoin){
    for(var i in objCoin){
var idname = objCoin[i].get("IMGfile");
AllCoinsFromParse.push(idname);
}
AllParse_VALUE = AllCoinsFromParse;
console.log(AllCoinsFromParse);

GetAllCMCValue(0);
 });

}

function GetAllCMCValue(a){
    setTimeout(function(){
        var CMC_COINS_VALUE = "https://api.coinmarketcap.com/v2/ticker/?convert=BTC&limit=50&start="+a;
  var promise = new Parse.Promise();        
    console.log("updating Coins...");       
    $.getJSON( CMC_COINS_VALUE, function( json ) {   
var Coins = json.data;
console.log(Coins)
lenghtValue = Coins.length;

for( var key in Coins ){
if(Coins.hasOwnProperty(key)){
AllCMC_VALUE.push({
        "name": Coins[key].name,
        "symbol": Coins[key].symbol,
        "website_slug"      : Coins[key].website_slug,
        "circulating_supply"     : Coins[key].circulating_supply,
        "max_supply" : Coins[key].max_supply,
        "total_supply" : Coins[key].total_supply

      })
}
}
console.log(AllCMC_VALUE);
console.log(AllParse_VALUE.length, a);

if((a+50) >= AllParse_VALUE.length){
checkadnDOValue(startvalue);

}else{
    GetAllCMCValue(a+50);
}

}, function error(err) {
            console.error(err);
        });  

        },2000);       

}





function checkadnDOValue(x){
    setTimeout(function(){
var name =  AllCMC_VALUE[x].name;    
var circulating_supply = AllCMC_VALUE[x].circulating_supply;
var Symbol = AllCMC_VALUE[x].symbol;
var Website_slug = AllCMC_VALUE[x].website_slug;
var max_supply = AllCMC_VALUE[x].max_supply;
var total_supply = AllCMC_VALUE[x].total_supply;
console.log(name, circulating_supply, Symbol, Website_slug, max_supply , total_supply);


if(AllParse_VALUE.indexOf(Website_slug) > -1){
UpdateCryptoValue(name, circulating_supply, Symbol, Website_slug, max_supply, total_supply, x)
}else{

CreateNewCoinValue(name, circulating_supply, Symbol, Website_slug, max_supply, total_supply, x) 

}
},600);
} 




function UpdateCryptoValue(name, circulating_supply, Symbol, Website_slug, max_supply, total_supply, x){
    if(max_supply == null){
    var Msupply = "null";
    }else{
    var Msupply = max_supply.toString();
    }

    if(total_supply == null){
    var Tsupply = "null";
    }else{
    var Tsupply = total_supply.toString();
    }
    if(circulating_supply == null){
    if(total_supply == null){
    var Csupply = "null";}else{
        var Csupply = total_supply.toString();
    }
    circulating_supply = Tsupply;
    }else{
     var Csupply = circulating_supply.toString();
    }
    setTimeout(function(){
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
    Query_CryptoCurrency.equalTo("IDCoin", Website_slug);
Query_CryptoCurrency.first().then(function(obj){
obj.set("CirculatingSupply", Csupply);
obj.set("MaxSupply", Msupply);
obj.set("TotalSupply", Tsupply);
obj.save().then(function(objsave) {
    console.log("objsave: "+name);
    console.log(x+"-gitU", name, Symbol);
    checkadnDOValue(x+1);
    });

});
},600);
}





function CreateNewCoinValue(name, circulating_supply, Symbol, Website_slug, max_supply, total_supply, x){
    if(max_supply == null){
    var Msupply = "null";
    }else{
    var Msupply = max_supply.toString();
    }

    if(total_supply == null){
    var Tsupply = "null";
    }else{
    var Tsupply = total_supply.toString();
    }
    if(circulating_supply == null){
    if(total_supply == null){
    var Csupply = "null";}else{
        var Csupply = total_supply.toString();
    }
    circulating_supply = Tsupply;
    }else{
     var Csupply = circulating_supply.toString();
    }
        setTimeout(function(){
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
CryptoCurrency = new CryptoCurrency();
CryptoCurrency.set("IDCoin", Website_slug);
CryptoCurrency.set("CoinName", name);
CryptoCurrency.set("Symbol", Symbol);
CryptoCurrency.set("IMGfile", Website_slug);
CryptoCurrency.set("CirculatingSupply", Csupply);
CryptoCurrency.set("MaxSupply", Msupply);
CryptoCurrency.set("TotalSupply", Tsupply);
CryptoCurrency.save().then(function(objsave2) {
    console.log("objsave: "+name);
        console.log(x+"-gitC", name, Symbol);
        checkadnDOValue(x+1);
    });
},600);
}






var CMC_COINS = "https://api.coinmarketcap.com/v2/listings/";

var AllCMC = [];
var AllParse = [];
var lenght;
function getAllCoinsFromCMC(){
var AllCoinsFromParse = [];    
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
Query_CryptoCurrency.exists("IMGfile");
Query_CryptoCurrency.limit(2000);
Query_CryptoCurrency.find().then(function(objCoin){
    for(var i in objCoin){
var idname = objCoin[i].get("IMGfile");
AllCoinsFromParse.push(idname);
}
AllParse = AllCoinsFromParse;
console.log(AllCoinsFromParse);

var url =  "https://api.coinmarketcap.com/v2/listings/";
  var promise = new Parse.Promise();        
    console.log("updating Coins...");       
    $.getJSON( CMC_COINS, function( json ) {   
var Coins = json.data;
AllCMC = Coins;
lenght = Coins.length;
var x = 820;
checkadnDO(x);
                      
}, function error(err) {
            console.error(err);
        });         
    });

}



function checkadnDO(x){
    setTimeout(function(){
var Name = AllCMC[x].name;
var Symbol = AllCMC[x].symbol;
var Website_slug = AllCMC[x].website_slug;
var id = AllCMC[x].id;
console.log(Name, Symbol, Website_slug);


if(AllParse.indexOf(Website_slug) > -1){
UpdateCrypto(id ,Name, Symbol, Website_slug, x)
}else{

CreateNewCoin(id ,Name, Symbol, Website_slug, x) 

}
},100);
      } 




//getAllCoinsFromCMC();

function UpdateCrypto(id ,Name, Symbol, Website_slug, x){
    setTimeout(function(){
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
    Query_CryptoCurrency.equalTo("IMGfile", Website_slug);
Query_CryptoCurrency.first().then(function(obj){
obj.set("IDCoin", Website_slug);
obj.set("IDCMC", id);
obj.set("CoinName", Name);
obj.set("Symbol", Symbol);
obj.save().then(function(objsave) {
    console.log("objsave: "+Name);
    console.log(x+"-gitU", Name, Symbol);
    checkadnDO(x+1);
    });

});
},100);
}

function CreateNewCoin(id ,Name, Symbol, Website_slug, x){
        setTimeout(function(){
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
CryptoCurrency = new CryptoCurrency();
CryptoCurrency.set("IDCoin", Website_slug);
CryptoCurrency.set("CoinName", Name);
CryptoCurrency.set("Symbol", Symbol);
CryptoCurrency.set("IMGfile", Website_slug);
CryptoCurrency.set("IDCMC", id);
CryptoCurrency.save().then(function(objsave2) {
    console.log("objsave: "+Name);
        console.log(x+"-gitC", Name, Symbol);
        checkadnDO(x+1);
    });
},100);
}




var AllCMCIMG = [];
var AllParseIMG = [];
var AllParseIDCMC = [];
var lenghtIMG;
function getAllCoinsFromParseIMG(){
var AllCoinsFromParse = [];
var AllCoinsFromParseIDCMC = [];      
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
Query_CryptoCurrency.exists("IMGfile");
Query_CryptoCurrency.limit(2000);
Query_CryptoCurrency.find().then(function(objCoin){
    for(var i in objCoin){
var idname = objCoin[i].get("IMGfile");
var idcmc = objCoin[i].get("IDCMC");
AllCoinsFromParse.push(idname);
AllCoinsFromParseIDCMC.push(idcmc);
}
AllParseIMG = AllCoinsFromParse;
AllParseIDCMC = AllCoinsFromParseIDCMC;
console.log(AllCoinsFromParse);

getAllimagesFromCMC(0, AllCoinsFromParse.length);
 });

}



var rekordyX = "";
function getAllimagesFromCMC(x, limit){
    if(x == limit){
        saveAllLinks();    
}else{
    setTimeout(function(){

var CMC_COINS_IMG = "https://s2.coinmarketcap.com/static/img/coins/64x64/"+AllParseIDCMC[x]+".png";
//$("#AllImages").append('<img src="'+CMC_COINS_IMG+'" name="'+AllParseIMG[x]+'" id="'+x+'"  height="32" width="32">');
$("#AllImages").append('<a href="https://s2.coinmarketcap.com/static/img/coins/64x64/'+AllParseIDCMC[x]+'.png">'+AllParseIDCMC[x]+'</a>');
console.log(x, limit);
getAllimagesFromCMC(x+1, limit);
//UpdateCryptoIMG(AllParseIMG[x], x);
},40);
}
}

function saveAllLinks(){
 var links = document.querySelectorAll('a');

  var linksArray = [];
  // Loop through all links
  for (var i = 0; i < links.length; i++) {

    // Store links in variable
    linksArray.push(links[i]);

    // Works fine in console
    console.log(linksArray);
  }


  // Create text document — only saves 1st link in text doc
  var textDoc = document.createElement('a');

  textDoc.href = 'data:attachment/text,' + encodeURI(linksArray.join('\n'));
  textDoc.target = '_blank';
  textDoc.download = 'File64.txt';
  textDoc.click(); 
}


function UpdateCryptoIMG(Name, x){
    setTimeout(function(){ 
    $( document ).ready(function() {   
    var src = $("#"+x).attr("src");
    console.log(src, Name, x);
var CryptoCurrency = Parse.Object.extend("CryptoCurrency");
var Query_CryptoCurrency = new Parse.Query(CryptoCurrency);
    Query_CryptoCurrency.equalTo("IDCoin", Name);
Query_CryptoCurrency.first().then(function(obj){
console.log(obj, src);
var File = new Parse.File("icon.png", src);
    File.save().then(function() {
    console.log(File.url());
    }, function(error) {
  console.log(error);
});
obj.set("CryptoIcon", File);
obj.save().then(function(objsave) {

    console.log(x+"-gitU");
    getAllimagesFromCMC(x+1);
    });

});
});
},1000);
}



//getAllCoinsFromParseIMG();


//ALL();
</script>
	</body>
</html>